<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º | –§–≠–ö –†–ì–≠–£ –†–ò–ù–•{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background: linear-gradient(-45deg, #003366, #004c99, #0073e6, #003366);
            background-size: 400% 400%;
            animation: gradientShift 10s ease infinite;
            font-family: "Segoe UI", sans-serif;
            color: #fff;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        header {
            background: rgba(0, 0, 0, 0.25);
            backdrop-filter: blur(8px);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* –õ–æ–≥–æ—Ç–∏–ø –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ —à–∞–ø–∫–µ */
        .header-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo img {
            width: 60px;
            height: 60px;
            transition: transform 0.4s ease;
            border-radius: 8px;
        }

        .logo img:hover {
            transform: rotate(10deg) scale(1.05);
        }

        .header-title h4 {
            margin: 0;
            font-weight: 600;
            color: white;
        }

        .header-title .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            margin: 0;
        }

        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem 1rem;
        }

        .panel {
            background: rgba(255, 255, 255, 0.15);
            padding: 2rem;
            border-radius: 20px;
            backdrop-filter: blur(8px);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 1200px;
            color: #fff;
        }

        footer {
            background: rgba(0, 0, 0, 0.25);
            backdrop-filter: blur(8px);
            padding: 1.5rem 0;
            margin-top: auto;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Ö–æ–¥–∞ */
        .page-logo {
            text-align: center;
            margin-bottom: 2rem;
        }

        .page-logo .logo img {
            width: 100px;
            height: 100px;
            margin-bottom: 1rem;
        }

        .college-title {
            font-weight: 600;
            color: white;
            margin-bottom: 1.5rem;
            text-align: center;
            font-size: 1.5rem;
        }

        /* === AI –ü–û–ú–û–©–ù–ò–ö –°–¢–ò–õ–ò === */
        .ai-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #007bff, #0056b3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
            transition: all .2s ease;
            z-index: 1000;
        }
        .ai-icon:hover { transform: scale(1.05); }
        .ai-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: #fff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .ai-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1001;
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .ai-modal-content {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 500px;
            height: 80vh;
            max-height: 700px;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .ai-header {
            background: #007bff;
            color: #fff;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }
        .ai-header h3 { margin: 0; font-size: 18px; font-weight: 600; }
        .ai-close {
            cursor: pointer;
            font-size: 28px;
            font-weight: bold;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background .2s;
        }
        .ai-close:hover { background: rgba(255,255,255,.2); }

        .ai-chat-messages {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            background: #1a1a2e;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            line-height: 1.4;
            word-wrap: break-word;
            animation: msgIn 0.3s ease;
            font-size: 14px;
        }
        @keyframes msgIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: none; } }

        /* –Ø–†–ö–ò–ï –ë–ï–õ–´–ï –°–û–û–ë–©–ï–ù–ò–Ø –ü–û–ú–û–©–ù–ò–ö–ê */
        .bot-message {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            color: #2c3e50 !important;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            font-weight: 500;
        }

        .user-message {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: #fff;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,123,255,0.3);
        }

        .ai-input-area {
            padding: 12px 16px;
            border-top: 1px solid #dee2e6;
            display: flex;
            gap: 8px;
            align-items: center;
            background: #fff;
        }
        #ai-user-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #ced4da;
            border-radius: 24px;
            outline: none;
            font-size: 15px;
            transition: border .2s;
        }
        #ai-user-input:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,.1);
        }

        #ai-send-btn, .voice-btn {
            padding: 10px 16px;
            border: none;
            border-radius: 24px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all .2s;
        }
        #ai-send-btn {
            background: #007bff;
            color: #fff;
        }
        #ai-send-btn:hover { background: #0056b3; }
        .voice-btn {
            background: #28a745;
            color: #fff;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        .voice-btn.recording {
            background: #dc3545;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        #ai-voice-status {
            height: 24px;
            font-style: italic;
            color: #6c757d;
            background: #f8f9fa;
            border-top: 1px solid #dee2e6;
        }

        @media (max-width: 576px) {
            .ai-modal-content {
                width: 95%;
                height: 85vh;
                border-radius: 12px;
            }
            .ai-header { padding: 14px 16px; }
            .ai-header h3 { font-size: 17px; }
            .ai-chat-messages { padding: 12px; }
            .ai-input-area { padding: 10px 12px; }

            .header-logo {
                flex-direction: column;
                gap: 8px;
                text-align: center;
            }
            .logo img {
                width: 50px;
                height: 50px;
            }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
        .alert {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            backdrop-filter: blur(8px);
        }
    </style>

    {% block styles %}{% endblock %}
</head>
<body>

    <!-- === HEADER === -->
    <header>
        <div class="header-logo">
            <div class="logo">
                <img src="{{ url_for('static', filename='logo.jpg') }}" alt="–õ–æ–≥–æ—Ç–∏–ø –§–≠–ö">
            </div>
            <div class="header-title">
                <h4>–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º</h4>
                <p class="subtitle">–§–ò–ù–ê–ù–°–û–í–û-–≠–ö–û–ù–û–ú–ò–ß–ï–°–ö–ò–ô –ö–û–õ–õ–ï–î–ñ (–†–ò–ù–•)</p>
            </div>
        </div>
        <div>
            {% if current_user.is_authenticated %}
                <span>{{ current_user.username }}</span>
                <a href="{{ url_for('logout') }}" class="btn btn-outline-light btn-sm ms-3">–í—ã–π—Ç–∏</a>
            {% else %}
            {% endif %}
        </div>
    </header>

    <!-- === MAIN CONTENT === -->
    <main>
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="panel">
            {% block content %}
            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            {% endblock %}
        </div>
    </main>

    <!-- === AI –ü–û–ú–û–©–ù–ò–ö === -->
    <div id="ai-support-icon" class="ai-icon">
        <svg width="50" height="50" viewBox="0 0 24 24" fill="#007bff">
            <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
            <circle cx="12" cy="12" r="3" fill="white"/>
        </svg>
        <span class="ai-badge">AI</span>
    </div>

    <div id="ai-chat-modal" class="ai-modal">
        <div class="ai-modal-content">
            <div class="ai-header">
                <h3>AI –ü–æ–º–æ—â–Ω–∏–∫ –§–≠–ö</h3>
                <span class="ai-close">√ó</span>
            </div>
            <div class="ai-chat-messages" id="ai-chat-messages">
                <div class="message bot-message">
                    <p>–ü—Ä–∏–≤–µ—Ç! –Ø AI-–ø–æ–º–æ—â–Ω–∏–∫ –§–≠–ö. –ú–æ–≥—É –ø–æ–º–æ—á—å —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏ –∏ –¥—Ä—É–≥–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?</p>
                </div>
            </div>
            <div class="ai-input-area">
                <input type="text" id="ai-user-input" placeholder="–ù–∞–ø–∏—à–∏ –∏–ª–∏ —Å–∫–∞–∂–∏..." maxlength="500">
                <button id="ai-voice-btn" class="voice-btn" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥">
                    <i class="bi bi-mic"></i>
                </button>
                <button id="ai-send-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
            <div id="ai-voice-status" class="text-center text-muted small p-1"></div>
        </div>
    </div>

    <!-- === FOOTER === -->
    <footer>
        <div class="container text-center">
            <p class="mb-2"><strong>–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Å–≤—è–∑–∏:</strong></p>
            <p class="mb-1">üìû –°—Ç–∞—Ä–æ—Å—Ç–∞ –≥—Ä—É–ø–ø—ã</p>
            <p class="mb-1">üìß –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã</p>
            <p class="mt-2 text-muted small">&copy; 2025 –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—á–µ–±–Ω—ã—Ö —Ç–µ–º | –§–ò–ù–ê–ù–°–û–í–û-–≠–ö–û–ù–û–ú–ò–ß–ï–°–ö–ò–ô –ö–û–õ–õ–ï–î–ñ (–†–ò–ù–•)</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const icon = document.getElementById('ai-support-icon');
        const modal = document.getElementById('ai-chat-modal');
        const closeBtn = document.querySelector('.ai-close');
        const sendBtn = document.getElementById('ai-send-btn');
        const voiceBtn = document.getElementById('ai-voice-btn');
        const userInput = document.getElementById('ai-user-input');
        const messages = document.getElementById('ai-chat-messages');
        const voiceStatus = document.getElementById('ai-voice-status');

        let recognition;
        let isRecording = false;

        // –°–∫—Ä—ã—Ç–∏–µ –∏–∫–æ–Ω–∫–∏ –Ω–∞ 24 —á–∞—Å–∞
        const hiddenTs = localStorage.getItem('ai-icon-hidden');
        if (hiddenTs && (Date.now() - parseInt(hiddenTs) < 24 * 60 * 60 * 1000)) {
            icon.style.display = 'none';
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ
        icon.addEventListener('click', () => {
            modal.style.display = 'block';
            userInput.focus();
        });
        closeBtn.addEventListener('click', () => modal.style.display = 'none');

        // === –ì–û–õ–û–°–û–í–û–ô –í–í–û–î ===
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.lang = 'ru-RU';
            recognition.interimResults = true;
            recognition.continuous = false;

            const updateStatus = (text, color = '') => {
                voiceStatus.textContent = text;
                voiceStatus.style.color = color;
            };

            voiceBtn.addEventListener('click', () => {
                if (isRecording) {
                    recognition.stop();
                    return;
                }
                recognition.start();
                isRecording = true;
                voiceBtn.classList.add('recording');
                voiceBtn.innerHTML = '<i class="bi bi-mic-fill"></i>';
                updateStatus('–°–ª—É—à–∞—é...', '#28a745');
            });

            recognition.onresult = (event) => {
                let final = '';
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    if (event.results[i].isFinal) {
                        final += event.results[i][0].transcript;
                    }
                }
                if (final) {
                    userInput.value = final.trim();
                    sendMessage();
                }
            };

            recognition.onerror = () => {
                voiceBtn.classList.remove('recording');
                voiceBtn.innerHTML = '<i class="bi bi-mic"></i>';
                updateStatus('–û—à–∏–±–∫–∞. –ü–æ–≤—Ç–æ—Ä–∏', '#dc3545');
                setTimeout(() => updateStatus(''), 2000);
                isRecording = false;
            };

            recognition.onend = () => {
                if (isRecording) {
                    voiceBtn.classList.remove('recording');
                    voiceBtn.innerHTML = '<i class="bi bi-mic"></i>';
                    updateStatus('');
                    isRecording = false;
                }
            };

        } else {
            voiceBtn.style.display = 'none';
        }

        // === –û–¢–ü–†–ê–í–ö–ê –°–û–û–ë–©–ï–ù–ò–ô ===
        function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;

            const userMsg = document.createElement('div');
            userMsg.className = 'message user-message';
            userMsg.innerHTML = `<p>${text}</p>`;
            messages.appendChild(userMsg);

            setTimeout(() => {
                const botMsg = document.createElement('div');
                botMsg.className = 'message bot-message';
                botMsg.innerHTML = `<p>${getBotResponse(text)}</p>`;
                messages.appendChild(botMsg);
                messages.scrollTop = messages.scrollHeight;
            }, 600);

            userInput.value = '';
            messages.scrollTop = messages.scrollHeight;
        }

        sendBtn.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', e => { if (e.key === 'Enter') sendMessage(); });

        // === –õ–û–ì–ò–ö–ê AI –ü–û–ú–û–©–ù–ò–ö–ê ===
        function getBotResponse(text) {
            const t = text.toLowerCase().trim();
            const userGroup = "{{ current_user.group.name if current_user.is_authenticated and current_user.group else '' }}";

            // –†–ê–°–ü–ò–°–ê–ù–ò–ï
            if (t.includes('—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ') || t.includes('—É—Ä–æ–∫–∏') || t.includes('–ø–∞—Ä—ã') || t.includes('—ç–∫–∑–∞–º–µ–Ω')) {
                let pdfUrl = '';
                let desc = '';
                if (userGroup && userGroup.includes('–ò–¢')) {
                    pdfUrl = 'https://rsue.ru/rfec/student/UchProcess/–æ_09.02.07.pdf';
                    desc = `üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≥—Ä—É–ø–ø—ã ${userGroup}`;
                } else if (userGroup && (userGroup.includes('–§–∏–Ω–∞–Ω—Å') || userGroup.includes('38.02.06'))) {
                    pdfUrl = 'https://rsue.ru/rfec/student/UchProcess/–æ_38.02.06.pdf';
                    desc = `üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≥—Ä—É–ø–ø—ã ${userGroup}`;
                } else if (t.includes('–±—É—Ö')) {
                    pdfUrl = 'https://rsue.ru/rfec/student/UchProcess/–æ_38.02.01.pdf';
                    desc = 'üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: –≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –±—É—Ö—É—á—ë—Ç';
                } else if (t.includes('—ç–∫–∑–∞–º–µ–Ω')) {
                    pdfUrl = 'https://rsue.ru/rfec/student/—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ%20–≥–∏–∞%20–û–§–û.pdf';
                    desc = 'üìù –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ì–ò–ê (—ç–∫–∑–∞–º–µ–Ω—ã)';
                }
                if (pdfUrl) {
                    setTimeout(() => window.open(pdfUrl, '_blank'), 1000);
                    return `${desc}\n\nüìé –û—Ç–∫—Ä—ã–≤–∞—é PDF-—Ñ–∞–π–ª...`;
                }
                return '‚ùì –£–∫–∞–∂–∏—Ç–µ –≥—Ä—É–ø–ø—É –∏–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:\n‚Ä¢ "–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ò–¢-21"\n‚Ä¢ "–ó–≤–æ–Ω–∫–∏" \n‚Ä¢ "–≠–∫–∑–∞–º–µ–Ω—ã"';
            }

            if (t.includes('–∑–≤–æ–Ω–∫')) {
                setTimeout(() => window.open('https://rsue.ru/rfec/student/zvonki.pdf', '_blank'), 1000);
                return 'üîî –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤\n\nüìé –û—Ç–∫—Ä—ã–≤–∞—é —Ñ–∞–π–ª —Å–æ –∑–≤–æ–Ω–∫–∞–º–∏...';
            }

            // –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–ò
            if (t.includes('–∫—Ç–æ') && (t.includes('–ø—Ä–µ–ø–æ–¥') || t.includes('–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å'))) {
                const teachers = {
                    '–∞–≤–µ—Ç–∏–∫–æ–≤–∞': 'üë©‚Äçüè´ –ê–≤–µ—Ç–∏–∫–æ–≤–∞ –õ.–ï.\nüìö –ë—É—Ö—É—á—ë—Ç\nüèÜ –í—ã—Å—à–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è',
                    '–±—É—Ç—É–∫': 'üë®‚Äçüè´ –ë—É—Ç—É–∫ –ù.–í.\nüìö –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\n‚è∞ 21 –≥–æ–¥ –æ–ø—ã—Ç–∞',
                    '—Å—ã—á–µ–≤': 'üë®‚Äçüè´ –°—ã—á—ë–≤ –†.–ê.\nüìö –î–∏—Ä–µ–∫—Ç–æ—Ä –§–≠–ö\nüéì –ö–∞–Ω–¥–∏–¥–∞—Ç —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –Ω–∞—É–∫',
                    '–ø–µ—Ç—Ä–æ–≤–∞': 'üë©‚Äçüè´ –ü–µ—Ç—Ä–æ–≤–∞ –ê.–ì.\nüìö –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞',
                    '–∫–∞—é–º–æ–≤–∞': 'üë©‚Äçüè´ –ö–∞—é–º–æ–≤–∞ –ï.–í.\nüìö –≠–∫–æ–Ω–æ–º–∏–∫–∞',
                    '–∫–∞—Ç–æ—á–∏–Ω–∞': 'üë©‚Äçüè´ –ö–∞—Ç–æ—á–∏–Ω–∞ –°.–ê.\nüìö –ù–∞–ª–æ–≥–∏',
                    '—É—à–∫–æ–≤–∞': 'üë©‚Äçüè´ –£—Å–∫–æ–≤–∞ –ò.–ò.\nüìö –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫\nüéì –ö–∞–Ω–¥–∏–¥–∞—Ç —Ñ–∏–ª–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –Ω–∞—É–∫'
                };
                for (let key in teachers) {
                    if (t.includes(key)) return teachers[key];
                }
                return '‚ùì –ù–µ –∑–Ω–∞—é —Ç–∞–∫–æ–≥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è.\n\nüìã –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:\n‚Ä¢ "–ê–≤–µ—Ç–∏–∫–æ–≤–∞"\n‚Ä¢ "–ë—É—Ç—É–∫"\n‚Ä¢ "–°—ã—á—ë–≤"';
            }

            // –ö–û–ù–¢–ê–ö–¢–´
            if (t.includes('—Ç–µ–ª–µ—Ñ–æ–Ω') || t.includes('–∫–æ–Ω—Ç–∞–∫—Ç')) {
                return `üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –§–≠–ö:\n\nüè¢ –ü—Ä–∏—ë–º–Ω–∞—è: +7 (863) 210-79-94\nüë®‚Äçüíº –î–∏—Ä–µ–∫—Ç–æ—Ä: +7 (863) 267-96-00\n\nüìç –ê–¥—Ä–µ—Å: –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É, —É–ª. –ö—Ä–∞—Å–Ω–æ–∞—Ä–º–µ–π—Å–∫–∞—è, 170`;
            }
            if (t.includes('–ø–æ—á—Ç–∞') || t.includes('email')) return 'üìß –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞:\nkolledg-rinh@mail.ru';

            // –°–ò–°–¢–ï–ú–ê –†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –¢–ï–ú
            if (t.includes('—Ç–µ–º–∞') || t.includes('—Ä–∞—Å–ø—Ä–µ–¥–µ–ª') || t.includes('–∫—É—Ä—Å–æ–≤') || t.includes('–¥–∏–ø–ª–æ–º')) {
                return 'üéì –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º:\n\nüìã –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–º–∞–º–∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª:\n\n‚Ä¢ üë®‚Äçüíº –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö\n‚Ä¢ üë®‚Äçüéì –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ä–æ—Å—Ç—ã - —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è —Ç–µ–º\n‚Ä¢ üë©‚Äçüéì –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–π —Ç–µ–º—ã';
            }

            // –ü–†–ò–í–ï–¢–°–¢–í–ò–Ø
            if (/–ø—Ä–∏–≤–µ—Ç|—Ö–∞–π|–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π|–¥–æ–±—Ä—ã–π|hello/i.test(t)) return 'üëã –ü—Ä–∏–≤–µ—Ç! –†–∞–¥ –≤–∞—Å –≤–∏–¥–µ—Ç—å!\n\n–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å? –°–ø—Ä–æ—Å–∏—Ç–µ –æ:\n‚Ä¢ üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–∏\n‚Ä¢ üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è—Ö\n‚Ä¢ üìû –ö–æ–Ω—Ç–∞–∫—Ç–∞—Ö\n‚Ä¢ üéì –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ç–µ–º';
            if (/—Å–ø–∞—Å–∏–±–æ|–±–ª–∞–≥–æ–¥–∞—Ä/i.test(t)) return 'üòä –í—Å–µ–≥–¥–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞! –û–±—Ä–∞—â–∞–π—Ç–µ—Å—å –µ—â—ë!';
            if (/–ø–æ–∫–∞|–¥–æ —Å–≤–∏–¥–∞–Ω/i.test(t)) return 'üëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –£–¥–∞—á–∏ –≤ —É—á—ë–±–µ! üéì';

            return '‚ùì –ù–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª –≤–æ–ø—Ä–æ—Å.\n\nüí° –°–ø—Ä–æ—Å–∏—Ç–µ –æ:\n‚Ä¢ üìö "–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ò–¢-21"\n‚Ä¢ üë®‚Äçüè´ "–ö—Ç–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ë—É—Ç—É–∫?"\n‚Ä¢ üìû "–¢–µ–ª–µ—Ñ–æ–Ω –§–≠–ö"\n‚Ä¢ üìß "–ü–æ—á—Ç–∞ –∫–æ–ª–ª–µ–¥–∂–∞"\n‚Ä¢ üéì "–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–º"';
        }
    });
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>